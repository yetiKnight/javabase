### ğŸ“˜ Java é¢è¯•å¤ä¹ ç¬”è®°ï¼šSet

### âœ… ä¸€ã€æ¦‚å¿µç®€ä»‹

**Set æ˜¯ä»€ä¹ˆï¼Ÿ**

`Set` æ˜¯ `java.util` åŒ…ä¸‹çš„ä¸€ä¸ªæ¥å£ï¼Œå®ƒç»§æ‰¿è‡ª `Collection` æ¥å£ï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ª**æ— åºä¸”ä¸åŒ…å«é‡å¤å…ƒç´ **çš„é›†åˆã€‚`Set` æ¥å£å¹¶æ²¡æœ‰å®šä¹‰ä»»ä½•æ–°çš„æ–¹æ³•ï¼Œå®ƒå®Œå…¨ä¾èµ–äº `Collection` æ¥å£çš„æ–¹æ³•ï¼Œä½†å…¶è¡Œä¸ºï¼ˆç‰¹åˆ«æ˜¯ `add()` å’Œ `equals()`ï¼‰å—åˆ°äº†ç‰¹æ®Šçº¦æŸã€‚

å¯ä»¥æŠŠ `Set` æƒ³è±¡æˆä¸€ä¸ª**æ•°å­¦ä¸­çš„é›†åˆ**ï¼š

  - é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ã€‚
  - é›†åˆä¸­çš„å…ƒç´ æ²¡æœ‰å›ºå®šçš„é¡ºåºã€‚

**ä¸ºä»€ä¹ˆç”¨ï¼Ÿ**

ğŸ¯ **æ ¸å¿ƒç›®çš„ï¼š** å­˜å‚¨å”¯ä¸€å…ƒç´ ï¼Œå¹¶é«˜æ•ˆåœ°æ‰§è¡ŒæŸ¥æ‰¾ã€æ·»åŠ å’Œåˆ é™¤æ“ä½œã€‚

  * **å»é‡ï¼š** å½“ä½ éœ€è¦ä¸€ä¸ªå®¹å™¨æ¥å­˜å‚¨ä¸€äº›å…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿è¿™äº›å…ƒç´ æ²¡æœ‰é‡å¤æ—¶ï¼Œ`Set` æ˜¯æœ€ä½³é€‰æ‹©ã€‚
  * **å¿«é€ŸæŸ¥æ‰¾ï¼š** `Set` çš„ä¸»è¦å®ç°ç±»ï¼ˆå¦‚ `HashSet`ï¼‰åº•å±‚é€šå¸¸ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œè¿™ä½¿å¾—å…ƒç´ çš„æ·»åŠ ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚

-----

### ğŸ”¹ äºŒã€æ ¸å¿ƒå®ç°ç±»

`Set` æ¥å£æœ‰å‡ ä¸ªé‡è¦çš„å®ç°ç±»ï¼Œæ¯ä¸ªç±»éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯ã€‚

#### 1\. `HashSet`

  * **ç‰¹ç‚¹ï¼š**
      * **æ— åºï¼š** ä¸ä¿è¯å…ƒç´ çš„è¿­ä»£é¡ºåºã€‚
      * **å”¯ä¸€ï¼š** ä¸å…è®¸æœ‰é‡å¤å…ƒç´ ã€‚
      * **åŸºäºå“ˆå¸Œè¡¨ï¼š** åº•å±‚ç”± `HashMap` å®ç°ï¼Œæ‰€æœ‰å…ƒç´ éƒ½ä½œä¸º `HashMap` çš„é”®ï¼ˆ`key`ï¼‰ï¼Œè€Œå€¼ï¼ˆ`value`ï¼‰æ˜¯ä¸€ä¸ªå›ºå®šçš„è™šæ‹Ÿå¯¹è±¡ã€‚
      * **çº¿ç¨‹ä¸å®‰å…¨ï¼š** åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œéœ€è¦é€šè¿‡ `Collections.synchronizedSet()` æˆ–å…¶ä»–å¹¶å‘å·¥å…·æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚
  * **æ ¸å¿ƒåŸç†ï¼š**
      * `add()` æ–¹æ³•ï¼šå½“æ·»åŠ å…ƒç´ æ—¶ï¼Œ`HashSet` ä¼šè°ƒç”¨å…ƒç´ çš„ `hashCode()` æ–¹æ³•æ¥ç¡®å®šå…¶å­˜å‚¨ä½ç½®ï¼Œå¹¶è°ƒç”¨ `equals()` æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨ç›¸åŒçš„å…ƒç´ ã€‚
      * **é‡è¦æç¤ºï¼š** å¦‚æœå°†è‡ªå®šä¹‰å¯¹è±¡æ”¾å…¥ `HashSet`ï¼Œå¿…é¡»åŒæ—¶**é‡å†™ `hashCode()` å’Œ `equals()` æ–¹æ³•**ï¼Œå¹¶ä¸”è¦éµå¾ªå®ƒä»¬çš„çº¦å®šï¼Œå³å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼ˆ`equals()` è¿”å› `true`ï¼‰ï¼Œå®ƒä»¬çš„å“ˆå¸Œç ä¹Ÿå¿…é¡»ç›¸ç­‰ã€‚

#### 2\. `LinkedHashSet`

  * **ç‰¹ç‚¹ï¼š**
      * **æœ‰åºï¼š** ä¿æŒå…ƒç´ çš„**æ’å…¥é¡ºåº**ã€‚
      * **å”¯ä¸€ï¼š** ä¸å…è®¸æœ‰é‡å¤å…ƒç´ ã€‚
      * **åŸºäºå“ˆå¸Œè¡¨å’Œé“¾è¡¨ï¼š** åº•å±‚ç”± `LinkedHashMap` å®ç°ï¼Œç»´æŠ¤ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥è®°å½•å…ƒç´ çš„æ’å…¥é¡ºåºã€‚
  * **æ ¸å¿ƒåŸç†ï¼š**
      * å®ƒåœ¨ `HashSet` çš„å“ˆå¸Œè¡¨åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å¯¹å…ƒç´ æ’å…¥é¡ºåºçš„ç»´æŠ¤ã€‚å½“ä½ éå† `LinkedHashSet` æ—¶ï¼Œå…ƒç´ çš„é¡ºåºå°±æ˜¯ä½ æ·»åŠ å®ƒä»¬çš„é¡ºåºã€‚

#### 3\. `TreeSet`

  * **ç‰¹ç‚¹ï¼š**
      * **æœ‰åºï¼š** å…ƒç´ æŒ‰ç…§**è‡ªç„¶æ’åº**æˆ–**è‡ªå®šä¹‰æ’åº**çš„é¡ºåºå­˜å‚¨å’Œè¿­ä»£ã€‚
      * **å”¯ä¸€ï¼š** ä¸å…è®¸æœ‰é‡å¤å…ƒç´ ã€‚
      * **åŸºäºçº¢é»‘æ ‘ï¼š** åº•å±‚ç”± `TreeMap` å®ç°ï¼Œæ‰€æœ‰å…ƒç´ éƒ½ä½œä¸º `TreeMap` çš„é”®ï¼Œå› æ­¤å…ƒç´ ä¼šæŒ‰ç…§æ’åºè§„åˆ™è¿›è¡Œç»„ç»‡ã€‚
  * **æ ¸å¿ƒåŸç†ï¼š**
      * `add()` æ–¹æ³•ï¼šæ·»åŠ å…ƒç´ æ—¶ï¼Œ`TreeSet` ä¼šä½¿ç”¨å…ƒç´ çš„ `compareTo()` æ–¹æ³•ï¼ˆå¦‚æœå…ƒç´ å®ç°äº† `Comparable` æ¥å£ï¼‰æˆ–è‡ªå®šä¹‰çš„ `Comparator` æ¥å†³å®šå…ƒç´ çš„ä½ç½®ã€‚
      * **é‡è¦æç¤ºï¼š** å¦‚æœå°†è‡ªå®šä¹‰å¯¹è±¡æ”¾å…¥ `TreeSet`ï¼Œè¯¥å¯¹è±¡å¿…é¡»å®ç° `Comparable` æ¥å£ï¼Œæˆ–è€…åœ¨åˆ›å»º `TreeSet` å®ä¾‹æ—¶æä¾›ä¸€ä¸ª `Comparator`ã€‚

-----

### âœ… ä¸‰ã€å¸¸ç”¨æ–¹å¼ + ä»£ç ç¤ºä¾‹

```java
import java.util.HashSet;
import java.util.LinkedHashSet;
import java.util.Set;
import java.util.TreeSet;

public class SetExample {
    public static void main(String[] args) {
        // --- 1. HashSet: æ— åºï¼Œå»é‡ ---
        Set<String> hashSet = new HashSet<>();
        hashSet.add("Apple");
        hashSet.add("Orange");
        hashSet.add("Banana");
        hashSet.add("Apple"); // é‡å¤å…ƒç´ ï¼Œä¸ä¼šè¢«æ·»åŠ 
        System.out.println("HashSet (æ— åºï¼Œä¸é‡å¤): " + hashSet); // é¡ºåºä¸ç¡®å®š
        
        // --- 2. LinkedHashSet: æœ‰åºï¼ˆæ’å…¥é¡ºåºï¼‰ï¼Œå»é‡ ---
        Set<String> linkedHashSet = new LinkedHashSet<>();
        linkedHashSet.add("Apple");
        linkedHashSet.add("Orange");
        linkedHashSet.add("Banana");
        linkedHashSet.add("Apple"); // é‡å¤å…ƒç´ ï¼Œä¸ä¼šè¢«æ·»åŠ 
        System.out.println("LinkedHashSet (æŒ‰æ’å…¥é¡ºåº): " + linkedHashSet); // é¡ºåºä¸º Apple, Orange, Banana

        // --- 3. TreeSet: æœ‰åºï¼ˆè‡ªç„¶æ’åºï¼‰ï¼Œå»é‡ ---
        Set<String> treeSet = new TreeSet<>();
        treeSet.add("Apple");
        treeSet.add("Orange");
        treeSet.add("Banana");
        treeSet.add("Apple"); // é‡å¤å…ƒç´ ï¼Œä¸ä¼šè¢«æ·»åŠ 
        System.out.println("TreeSet (æŒ‰è‡ªç„¶æ’åº): " + treeSet); // é¡ºåºä¸º Apple, Banana, Orange

        // --- 4. è‡ªå®šä¹‰å¯¹è±¡å»é‡ ---
        Set<User> userSet = new HashSet<>();
        userSet.add(new User(1, "Alice"));
        userSet.add(new User(2, "Bob"));
        userSet.add(new User(1, "Alice")); // å°½ç®¡å†…å®¹ç›¸åŒï¼Œä½†å¦‚æœæ²¡æœ‰é‡å†™ hashCode() å’Œ equals()ï¼Œä»ä¼šè¢«æ·»åŠ 
        System.out.println("è‡ªå®šä¹‰å¯¹è±¡å»é‡ï¼ˆæœªé‡å†™ï¼‰ï¼š" + userSet.size());
        
        // --- é‡å†™ hashCode() å’Œ equals() å ---
        Set<UserWithOverride> userSet2 = new HashSet<>();
        userSet2.add(new UserWithOverride(1, "Alice"));
        userSet2.add(new UserWithOverride(2, "Bob"));
        userSet2.add(new UserWithOverride(1, "Alice")); // ç°åœ¨åªæ·»åŠ ä¸€ä¸ªå…ƒç´ 
        System.out.println("è‡ªå®šä¹‰å¯¹è±¡å»é‡ï¼ˆé‡å†™åï¼‰ï¼š" + userSet2.size());
    }
}

class User {
    int id;
    String name;
    public User(int id, String name) {
        this.id = id;
        this.name = name;
    }
}

class UserWithOverride {
    int id;
    String name;
    public UserWithOverride(int id, String name) {
        this.id = id;
        this.name = name;
    }
    
    @Override
    public int hashCode() {
        return id;
    }
    
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;
        UserWithOverride user = (UserWithOverride) obj;
        return id == user.id && name.equals(user.name);
    }
}
```

### ğŸ” å››ã€çœŸå®é¢è¯•é«˜é¢‘é—®é¢˜ + æ·±åº¦è§£æ

**1. `Set` æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå¸¸ç”¨çš„å®ç°ç±»æœ‰å“ªäº›ï¼Ÿ**

  * **æ ‡å‡†ç­”æ¡ˆï¼š** `Set` çš„ç‰¹ç‚¹æ˜¯**æ— åºä¸”ä¸åŒ…å«é‡å¤å…ƒç´ **ã€‚å¸¸ç”¨çš„å®ç°ç±»æœ‰ `HashSet`ã€`LinkedHashSet` å’Œ `TreeSet`ã€‚

**2. `HashSet` å¦‚ä½•ä¿è¯å…ƒç´ çš„å”¯ä¸€æ€§ï¼Ÿ**

  * **æ ‡å‡†ç­”æ¡ˆï¼š** `HashSet` åº•å±‚ä¾èµ–äº `HashMap`ã€‚å®ƒé€šè¿‡å…ƒç´ çš„ `hashCode()` æ–¹æ³•æ¥ç¡®å®šå­˜å‚¨ä½ç½®ï¼Œç„¶åé€šè¿‡ `equals()` æ–¹æ³•æ¥æ¯”è¾ƒæ˜¯å¦å·²å­˜åœ¨ç›¸åŒçš„å…ƒç´ ã€‚åªæœ‰å½“ä¸¤ä¸ªå¯¹è±¡çš„ `hashCode()` å’Œ `equals()` éƒ½ç›¸åŒæ—¶ï¼Œ`HashSet` æ‰è®¤ä¸ºå®ƒä»¬æ˜¯é‡å¤çš„ã€‚
  * **æ·±å…¥ï¼š** å¦‚æœè‡ªå®šä¹‰å¯¹è±¡æ²¡æœ‰é‡å†™ `hashCode()` å’Œ `equals()`ï¼Œé‚£ä¹ˆå®ƒä¼šä½¿ç”¨ `Object` ç±»çš„é»˜è®¤å®ç°ï¼Œè¯¥å®ç°é€šå¸¸æ˜¯åŸºäºå¯¹è±¡çš„å†…å­˜åœ°å€ã€‚è¿™ä¼šå¯¼è‡´å³ä½¿ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹å®Œå…¨ä¸€æ ·ï¼Œå®ƒä»¬ä¹Ÿè¢«è®¤ä¸ºæ˜¯ä¸åŒçš„ï¼Œä»è€Œæ— æ³•å»é‡ã€‚

**3. `HashSet`ã€`LinkedHashSet` å’Œ `TreeSet` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

  * **æ ‡å‡†ç­”æ¡ˆï¼š**
      * **`HashSet`ï¼š** **æ— åº**ï¼Œæ€§èƒ½æœ€å¥½ã€‚
      * **`LinkedHashSet`ï¼š** **æŒ‰æ’å…¥é¡ºåºæœ‰åº**ï¼Œæ€§èƒ½ç•¥ä½äº `HashSet`ã€‚
      * **`TreeSet`ï¼š** **æŒ‰å…ƒç´ è‡ªç„¶æ’åºæˆ–è‡ªå®šä¹‰æ’åºæœ‰åº**ï¼Œæ€§èƒ½æœ€å·®ï¼ˆO(log n)ï¼‰ï¼Œå› ä¸ºå®ƒéœ€è¦ç»´æŠ¤çº¢é»‘æ ‘ç»“æ„ã€‚
  * **åœºæ™¯é€‰æ‹©ï¼š**
      * å¦‚æœä½ åªéœ€è¦å»é‡ï¼Œå¯¹é¡ºåºæ²¡æœ‰è¦æ±‚ï¼Œç”¨ `HashSet`ã€‚
      * å¦‚æœä½ æ—¢è¦å»é‡ï¼Œåˆè¦ä¿æŒå…ƒç´ çš„æ’å…¥é¡ºåºï¼Œç”¨ `LinkedHashSet`ã€‚
      * å¦‚æœä½ æ—¢è¦å»é‡ï¼Œåˆè¦å¯¹å…ƒç´ è¿›è¡Œæ’åºï¼Œç”¨ `TreeSet`ã€‚

**4. ä¸ºä»€ä¹ˆé‡å†™ `equals()` æ–¹æ³•æ—¶ï¼Œé€šå¸¸ä¹Ÿéœ€è¦é‡å†™ `hashCode()` æ–¹æ³•ï¼Ÿ**

  * **æ ‡å‡†ç­”æ¡ˆï¼š** è¿™æ˜¯ä¸ºäº†ä¿è¯ `Set` å’Œ `Map` ç­‰å“ˆå¸Œè¡¨å®¹å™¨çš„æ­£ç¡®è¡Œä¸ºã€‚
  * **æ·±å…¥ï¼š** `Set` çš„ `add()` æ–¹æ³•ä¼šå…ˆè°ƒç”¨ `hashCode()` æ‰¾åˆ°å¯¹åº”çš„æ¡¶ï¼Œç„¶åéå†è¯¥æ¡¶ä¸­çš„å…ƒç´ ï¼Œé€šè¿‡ `equals()` è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœåªé‡å†™äº† `equals()`ï¼Œæ²¡æœ‰é‡å†™ `hashCode()`ï¼Œé‚£ä¹ˆä¸¤ä¸ªé€»è¾‘ä¸Šç›¸ç­‰çš„å¯¹è±¡å¯èƒ½ä¼šæœ‰ä¸åŒçš„å“ˆå¸Œç ï¼Œè¢«å­˜æ”¾åœ¨ä¸åŒçš„æ¡¶ä¸­ï¼Œå¯¼è‡´ `Set` æ— æ³•æ­£ç¡®åˆ¤æ–­å®ƒä»¬æ˜¯é‡å¤çš„ï¼Œä»è€Œè¿åäº† `Set` çš„å”¯ä¸€æ€§çº¦æŸã€‚

### ğŸ’¡ äº”ã€å£è¯€ + è¡¨æ ¼/å›¾ç¤ºè¾…åŠ©è®°å¿†

**Set ä¸‰å…„å¼Ÿå£è¯€**

> **HashSetï¼Œå¿«å¦‚é£ï¼Œæ— åºå»é‡é å“ˆå¸Œã€‚**
> **LinkedHashSetï¼Œé“¾è¡¨ä¸²ï¼Œæ’å…¥æœ‰åºä¸ä¹±è·‘ã€‚**
> **TreeSetï¼Œçº¢é»‘æ ‘ï¼Œè‡ªç„¶æ’åºæœ‰è§„å¾‹ã€‚**

**`Set` å®ç°ç±»æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”**

| ç‰¹æ€§ | **`HashSet`** | **`LinkedHashSet`** | **`TreeSet`** |
| :--- | :--- | :--- | :--- |
| **åº•å±‚æ•°æ®ç»“æ„**| `HashMap` | `LinkedHashMap` | `TreeMap` (çº¢é»‘æ ‘) |
| **å…ƒç´ é¡ºåº** | æ— åº | æŒ‰æ’å…¥é¡ºåº | è‡ªç„¶æ’åºæˆ–è‡ªå®šä¹‰æ’åº |
| **æ€§èƒ½** | æœ€ä½³ (O(1)) | è‰¯å¥½ (O(1)) | è¾ƒå·® (O(log n)) |
| **æ˜¯å¦çº¿ç¨‹å®‰å…¨**| å¦ | å¦ | å¦ |
| **ä¸»è¦åº”ç”¨** | å¿«é€Ÿå»é‡ | ä¿æŒå»é‡ä¸”æœ‰åº | æ’åºå»é‡ |

-----

### ğŸ å…­ã€å»ºè®® + è¯¯åŒºæé†’

**è¯¯åŒºæé†’**

1.  **å¿˜è®°é‡å†™ `hashCode()`ï¼š** è¿™æ˜¯æœ€å¸¸è§çš„é”™è¯¯ï¼Œä¼šå¯¼è‡´ `Set` æ— æ³•æ­£ç¡®å»é‡è‡ªå®šä¹‰å¯¹è±¡ã€‚
2.  **æ··æ·† `LinkedHashSet` å’Œ `TreeSet` çš„é¡ºåºï¼š** `LinkedHashSet` æ˜¯æŒ‰**æ’å…¥é¡ºåº**ï¼Œ`TreeSet` æ˜¯æŒ‰**æ’åºé¡ºåº**ã€‚

**ä½¿ç”¨å»ºè®®**

1.  **æ ¹æ®éœ€æ±‚é€‰æ‹©ï¼š** ä¼˜å…ˆè€ƒè™‘æœ€ç®€å•çš„ `HashSet`ï¼Œé™¤éä½ å¯¹é¡ºåºæœ‰ç‰¹æ®Šè¦æ±‚ã€‚
2.  **é‡å†™æ–¹æ³•ï¼š** åªè¦ä½ å°†è‡ªå®šä¹‰å¯¹è±¡æ”¾å…¥å“ˆå¸Œè¡¨ç›¸å…³çš„é›†åˆï¼ˆå¦‚ `HashSet`ã€`HashMap`ï¼‰ï¼Œå°±å¿…é¡»åŒæ—¶é‡å†™ `equals()` å’Œ `hashCode()`ã€‚
3.  **çº¿ç¨‹å®‰å…¨ï¼š** å¦‚æœåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ `Set`ï¼Œè¯·ä½¿ç”¨ `Collections.synchronizedSet(new HashSet<>())` æˆ– `ConcurrentHashMap.newKeySet()` æ¥åˆ›å»ºçº¿ç¨‹å®‰å…¨çš„ `Set`ã€‚